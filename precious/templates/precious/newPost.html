{% load crispy_forms_tags %}
{% load staticfiles %}
<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Defter</title>

    <!-- Bootstrap Core CSS -->
    <link href="{% static "css/bootstrap.min.css" %}" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="{% static "css/clean-blog.min.css" %}" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="{% static "css/font-awesome.min.css" %}" rel="stylesheet" type="text/css">
    <link href="{% static "css/first.css" %}" rel="stylesheet" type="text/css">
    <link href="{% static "css/second.css" %}" rel="stylesheet" type="text/css">
    <link href="{% static "css/newCustom.css" %}"  rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    {% block head %} {% endblock %}

</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/"><i class="fa fa-home fa-2x"></i></a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">

                    <li><a class="offButton"href="{% url "editor_on" pk=post.pk %}"><i class="fa fa-toggle-off"></i></a></li>
                    <li><a class="onButton" href="{% url "editor_off" pk=post.pk %}"><i class="fa fa-toggle-on"></i></a></li>
                    <li><a class="customized" href="{% url "new_post" %}" class="button"> New Entry </a></li>
                    <li><a class="customized" href="{% url "new_category" %}" class="button"> New Category </a></li>

                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Page Header -->
    {% if post.thumbnail %}
    <header class="intro-header" style="background-image: url('/static/{{ post.thumbnail }}')">
    {% else %}
    <header class="intro-header" style="background-image: url('/static/img/default.jpg')">
    {% endif %}
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="post-heading" >
                        <h1>{{ post.title }}</h1>
                        <h2 class="subheading">{{ post.description }}</h2>
                        <span class="meta">{{ post.created_date}} {{ post.updated_date}}</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Post Content -->
    <article>
        <div class="container">
            <div class="row">
                <div class="col-lg-12">

                <p>
                <a class="btn btn-default editorMode" href="{% url "edit_post" pk=post.pk %}"> <i class="fa fa-pencil"></i> </a>
                <a class="btn btn-default editorMode" href="{% url "delete_post" pk=post.pk %}" onclick="clicked(event)">  <i class="fa fa-trash-o"></i>  </a>
                </p>

                {% for item in all_items %}

                {% if item.paragraph %}

                    {% if post.is_editor %}
                    <div class="jumbotron">
                    <p>
                    <a class="btn btn-default disabled"> {{ item.position }} </a>
                    <a class="btn btn-default disabled"> <i class="fa fa-file-text-o"></i> </a>
                    {% if item.edited %}
                    <a class="btn btn-default disabled"> <i class="fa fa-scissors"></i> </a>
                    {% endif %}
                    &nbsp;&nbsp;&nbsp;
                    <a class="btn btn-default" href="{% url "edit_general_text" pk=post.pk pks=item.pk %}" > <i class="fa fa-pencil"></i></a>
                    <a class="btn btn-default" href="{% url "delete_general_text" pk=item.pk ppk=post.pk %}"> <i class="fa fa-trash-o"></i></a>
                    </p>
                    {% else %}
                    <div>
                    {% endif %}

                    <p>{{ item.text }}</p>

                    </div>

                {% elif item.heading %}

                    {% if post.is_editor %}
                    <div class="jumbotron">
                    <a class="btn btn-default btn-xs disabled"> {{ item.position }} </a>
                    <a class="btn btn-default btn-xs disabled"> <i class="fa fa-header"></i> </a>
                    {% if item.edited %} <a class="btn btn-default btn-xs disabled"> <i class="fa fa-scissors"></i> </a> {% endif %}
                    &nbsp;&nbsp;&nbsp;
                    <a class="btn btn-default btn-xs" href="{% url "edit_general_text" pk=post.pk pks=item.pk %}" > <i class="fa fa-pencil"></i></a>
                    <a class="btn btn-default btn-xs" href="{% url "delete_general_text" pk=item.pk ppk=post.pk %}"> <i class="fa fa-trash-o"></i></a>
                    {% else %}
                    <div>
                    {% endif %}

                    <h2 class="section-heading">{{ item.text }}</h2>

                    </div>


                {% elif item.inline_block %}

                    {% if post.is_editor %}
                    <div class="jumbotron">
                    <p>
                    <a class="btn btn-default btn-xs disabled"> {{ item.position }} </a>
                    <a class="btn btn-default btn-xs disabled"> <i class="fa fa-indent"></i></a>
                    {% if item.edited %}
                       <a class="btn btn-default btn-xs disabled"> <i class="fa fa-scissors"></i> </a>
                    {% endif %}
                    &nbsp;&nbsp;&nbsp;
                    <a class="btn btn-default btn-xs" href="{% url "edit_general_text" pk=post.pk pks=item.pk %}" > <i class="fa fa-pencil"></i></a>
                    <a class="btn btn-default btn-xs" href="{% url "delete_general_text" pk=item.pk ppk=post.pk %}"> <i class="fa fa-trash-o"></i></a>
                    </p>
                    {% else %}
                    <div>
                    {% endif %}

                    <blockquote>{{ item.text }}</blockquote>

                    </div>

                {% elif item.code %}

                    {% if post.is_editor %}
                    <div class="jumbotron">
                    <p>
                    <a class="btn btn-default btn-xs disabled"> {{ item.position }} </a>
                    <a class="btn btn-default btn-xs disabled"> <i class="fa fa-file-code-o"></i> </a>
                    {% if item.edited %}
                    <a class="btn btn-default btn-xs disabled"> <i class="fa fa-scissors"></i> </a>
                    {% endif %}
                    &nbsp;&nbsp;&nbsp;
                    <a class="btn btn-default btn-xs" href="{% url "edit_general_text" pk=post.pk pks=item.pk %}" > <i class="fa fa-pencil"></i></a>
                    <a class="btn btn-default btn-xs" href="{% url "delete_general_text" pk=item.pk ppk=post.pk %}"> <i class="fa fa-trash-o"></i></a>
                    </p>
                    {% else %}
                    <div>
                    {% endif %}

                    <pre><code>{{ item.text }}</code></pre>

                    </div>

                {% elif item.subheading %}

                    {% if post.is_editor %}
                    <div class="jumbotron">
                    <p>
                    <a class="btn btn-default btn-xs disabled"> {{ item.position }} </a>
                    <a class="btn btn-default btn-xs disabled">
                        <i class="fa fa-header"></i>
                        <i class="fa fa-header"></i>
                    </a>
                    {% if item.edited %} <a class="btn btn-default btn-xs disabled"> <i class="fa fa-scissors"></i> </a> {% endif %}
                    &nbsp;&nbsp;&nbsp;
                    <a class="btn btn-default btn-xs" href="{% url "edit_general_text" pk=post.pk pks=item.pk %}" > <i class="fa fa-pencil"></i></a>
                    <a class="btn btn-default btn-xs" href="{% url "delete_general_text" pk=item.pk ppk=post.pk %}"> <i class="fa fa-trash-o"></i></a>
                    </p>
                    {% else %}
                    <div>
                    {% endif %}

                    <h3>{{ item.text }}</h3>

                    </div>


                {% elif item.subsubheading %}

                    {% if post.is_editor %}
                    <div class="jumbotron">
                    <p>
                    <a class="btn btn-default btn-xs disabled"> {{ item.position }} </a>
                    <a class="btn btn-default btn-xs disabled">
                        <i class="fa fa-header"></i>
                        <i class="fa fa-header"></i>
                        <i class="fa fa-header"></i>
                    </a>
                    {% if item.edited %}
                    <a class="btn btn-default btn-xs disabled"> <i class="fa fa-scissors"></i> </a>
                    {% endif %}
                    &nbsp;&nbsp;&nbsp;
                    <a class="btn btn-default btn-xs" href="{% url "edit_general_text" pk=post.pk pks=item.pk %}" > <i class="fa fa-pencil"></i></a>
                    <a class="btn btn-default btn-xs" href="{% url "delete_general_text" pk=item.pk ppk=post.pk %}"> <i class="fa fa-trash-o"></i></a>
                    </p>

                    {% else %}
                    <div>
                    {% endif %}
                    <h4>{{ item.text }}</h4>

                    </div>


                {% elif item.list_item %}

                    {% if post.is_editor %}
                    <div class="jumbotron">
                    <p>
                    <a class="btn btn-default btn-xs disabled"> {{ item.position }} </a>
                    <a class="btn btn-default btn-xs disabled"> <i class="fa fa-list-alt"></i> </a>
                    {% if item.edited %}
                    <a class="btn btn-default btn-xs disabled"> <i class="fa fa-scissors"></i> </a>
                    {% endif %}
                    &nbsp;&nbsp;&nbsp;
                    <a class="btn btn-default btn-xs" href="{% url "edit_general_text" pk=post.pk pks=item.pk %}" > <i class="fa fa-pencil"></i></a>
                    <a class="btn btn-default btn-xs" href="{% url "delete_general_text" pk=item.pk ppk=post.pk %}"> <i class="fa fa-trash-o"></i></a>
                    </p>
                    {% else %}
                    <div>
                    {% endif %}

                    <li>{{ item.text }} </li>

                    </div>

                {% elif item.link %}

                    {% if post.is_editor %}
                    <div class="jumbotron">
                    <p>
                    <a class="btn btn-default btn-xs disabled"> {{ item.position }} </a>
                    <a class="btn btn-default btn-xs disabled"> <i class="fa fa-link"></i> </a>
                    {% if item.edited %}
                       <a class="btn btn-default btn-xs disabled"> <i class="fa fa-scissors"></i> </a>
                    {% endif %}
                    &nbsp;&nbsp;&nbsp;
                    <a class="btn btn-default btn-xs" href="{% url "edit_general_text" pk=post.pk pks=item.pk %}" > <i class="fa fa-pencil"></i></a>
                    <a class="btn btn-default btn-xs" href="{% url "delete_general_text" pk=item.pk ppk=post.pk %}"> <i class="fa fa-trash-o"></i></a>
                    {% else %}
                    <div>
                    {% endif %}

                    <p><a href="{{ item.text }}" target="_blank">{{ item.text }}</a></p>

                    </div>

                {% elif item.image %}

                    {% if post.is_editor %}
                    <div class="jumbotron">
                    <p>
                    <a class="btn btn-default btn-xs disabled"> {{ item.position }} </a>
                    <a class="btn btn-default btn-xs disabled"> <i class="fa fa-picture-o"></i> </a>
                    {% if item.edited %}
                    <a class="btn btn-default btn-xs disabled"> <i class="fa fa-scissors"></i> </a>
                    {% endif %}
                    &nbsp;&nbsp;&nbsp;
                    <a class="btn btn-default btn-xs" href="{% url "edit_general_file" pk=post.pk pks=item.pk %}" > <i class="fa fa-pencil"></i></a>
                    <a class="btn btn-default btn-xs" href="{% url "delete_general_file" pk=item.pk ppk=post.pk %}"> <i class="fa fa-trash-o"></i></a>
                    </p>
                    {% else %}
                    <div>
                    {% endif %}

                    <a href="#"> <img class="img-responsive" src="/static/{{ item.file_item }}" alt=""> </a></p>
                    <span class="caption text-muted">
                        Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.
                    </span>

                    </div>

                {% elif item.other %}

                    {% if post.is_editor %}
                    <div class="jumbotron">
                    <p>
                    <a class="btn btn-default btn-xs disabled"> {{ item.position }} </a>
                    <a class="btn btn-default btn-xs disabled"> <i class="fa fa-paperclip"></i> </a>
                    {% if item.edited %}
                        <a class="btn btn-default btn-xs disabled"> <i class="fa fa-scissors"></i></a>
                    {% endif %}
                    &nbsp;&nbsp;&nbsp;
                    <a class="btn btn-default btn-xs" href="{% url "edit_general_file" pk=post.pk pks=item.pk %}" > <i class="fa fa-pencil"></i></a>
                    <a class="btn btn-default btn-xs" href="{% url "delete_general_file" pk=item.pk ppk=post.pk %}"> <i class="fa fa-trash-o"></i></a>
                    </p>
                    {% else %}
                    <div>
                    {% endif %}

                    <p><a href="/static/{{ item.file_item }}"> {{ item.file_item }} </a></p>

                    </div>

                {% elif item.video %}

                    {% if post.is_editor %}
                    <div class="jumbotron">
                    <p>
                    <a class="btn btn-default btn-xs disabled"> {{ item.position }} </a>
        			<a class="btn btn-default btn-xs disabled"> <i class="fa fa-file-video-o"></i> </a>
        			{% if item.edited %}
        				<a class="btn btn-default btn-xs disabled"> <i class="fa fa-scissors"></i></a>
        			{% endif %}
        			&nbsp;&nbsp;&nbsp;
        			<a class="btn btn-default btn-xs" href="{% url "edit_general_file" pk=post.pk pks=item.pk %}" > <i class="fa fa-pencil"></i></a>
        			<a class="btn btn-default btn-xs" href="{% url "delete_general_file" pk=item.pk ppk=post.pk %}"> <i class="fa fa-trash-o"></i></a>
                    </p>
                    {% else %}
                    <div>
                    {% endif %}

                    <video controls>
                		<source src="/static/{{ item.file_item }}" type="video/mp4">
                		<source "/static/{{ item.file_item }}" type="video/ogg">
                	</video>

                    </div>

                {% elif item.is_safe %}

                    {% if post.is_editor %}
                    <div class="jumbotron">
                    <p>
                    <a class="btn btn-default btn-xs disabled"> {{ item.position }} </a>
        			<a class="btn btn-default btn-xs disabled"> <i class="fa fa-file-o"></i> </a>
        			{% if item.edited %}
        			  <a class="btn btn-default btn-xs disabled"> <i class="fa fa-scissors"></i> </a>
        			{% endif %}
        			&nbsp;&nbsp;&nbsp;
        			<a class="btn btn-default btn-xs" href="{% url "edit_general_text" pk=post.pk pks=item.pk %}" > <i class="fa fa-pencil"></i></a>
        			<a class="btn btn-default btn-xs" href="{% url "delete_general_text" pk=item.pk ppk=post.pk %}"> <i class="fa fa-trash-o"></i></a>
                    </p>
                    {% else %}
                    <div>
                    {% endif %}

                    {{ item.text|safe }}

                    </div>

                {% endif %}

                {% endfor %}

                <!-- Create new general text -->
                <p class="editorMode">
                	<a class="text-type-adjuster btn btn-default" id='heading'><i class="fa fa-header"></i></i></a>
                	<a class="text-type-adjuster btn btn-default" id='subheading'>
                        <i class="fa fa-header"></i><i class="fa fa-header"></i></a>
                	<a class="text-type-adjuster btn btn-default" id='subsubheading'>
                        <i class="fa fa-header"></i><i class="fa fa-header"></i><i class="fa fa-header"></i></a>
                    <a class="text-type-adjuster btn btn-default btn btn-default" id='paragraph'><i class="fa fa-file-text-o"></i></a>
                    <a class="text-type-adjuster btn btn-default" id='inline_block'><i class="fa fa-indent"></i></a>
                	<a class="text-type-adjuster btn btn-default" id='code'><i class="fa fa-file-code-o"></i></a>
                    <a class="text-type-adjuster btn btn-default" id='list_item'><i class="fa fa-list-alt"></i></a>
                    <a class="text-type-adjuster btn btn-default" id='link'><i class="fa fa-link"></i></a>
                    <a class="btn btn-danger text-type-adjuster btn-xs" id='is_safe'> <i class="fa fa-file-o"></i> </a>
                </p>

                <p class="editorMode">

                	<a class="file-type-adjuster btn btn-default" id='image'><i class="fa fa-file-image-o"></i></a>
                	<a class="file-type-adjuster btn btn-default" id='video'><i class="fa fa-file-video-o"></i></a>
                	<a class="file-type-adjuster btn btn-default" id='other'><i class="fa fa-paperclip"></i></a>
                </p>


                <!-- Forms -->
                <p class="editorMode">
                	<form id="text-form" method="post" action="{% url "new_general_text" pk=post.pk %}" enctype="multipart/form-data" hidden='True'>
                	{% csrf_token %}
                	{{ general_text_form|crispy }}
                	<input type="text" name="item_type" id='text-type-input' hidden='True'/>
                	<input class="submitButton btn btn-default" type="submit" name="submit" value="Submit" />
                	<button  class="btn btn-default" id='text-cancel'> Cancel </button>

                	</form>
                </p>

                <p class="editorMode">
                	<form id="file-form" method="post" action="{% url "new_general_file" pk=post.pk %}" enctype="multipart/form-data" hidden='True'>
                	{% csrf_token %}
                	{{ general_file_form|crispy }}
                	<input type="text" name="file_type" id='file-type-input' hidden='True'/>
                	<input class="submitButton btn btn-default" type="submit" name="submit" value="Submit" />
                	<button class="btn btn-default" id='file-cancel'> Cancel </button>
                	</form>
                </p>

                </div>
            </div>
        </div>
    </article>


    <!-- Footer -->
    <footer style="padding-bottom:30px;">
        <hr>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <p class="copyright text-muted">
                        Built for himself by <a target="_blank" href="https://www.twitter.com/skagankose">Suha</a>,
                        Copyright &copy; 2016
                </div>
            </div>
        </div>
    </footer>

    <script src="{% static "js/jquery.js" %}"></script>
    <script src="{% static "js/bootstrap.min.js" %}"></script>
    <script src="{% static "js/clean-blog.min.js" %}"></script>
    <script src="{% static "js/newPost.js" %}"></script>


   {% if post.is_editor %}
       <script>
       $(document).ready(function() {
           $('.editorMode').show();
           $('.offButton').hide();
           $('.onButton').show();
       })
       </script>
   {% else %}
       <script>
       $(document).ready(function() {
           $('.editorMode').hide();
           $('.offButton').show();
           $('.onButton').hide();
       })
       </script>
   {% endif %}

   </body>

</html>
